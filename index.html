<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Heart attack analysis | M.L.</title>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/Keyang/node-csvtojson/d41f44aa/browser/csvtojson.min.js"></script>

    <script>
        const page = document.querySelector('#SelectCols');
        const page2 = document.querySelector('#Input_URL');
        var i = 0;
        var datastore = {};

        $( document ).ready(function() {
 
        $("#Nextbtn").click(function(){
            alert($("#exampleFormControlInput1").val);
            $.get($("#exampleFormControlInput1").val(), function(data, status){
                
                csv({
                    //output: "csv"
                })
                .fromString(data)
                .then(function(result){
                    datastore = result;
                    // datastore.forEach(element => {
                    //    console.log(element);
                    // });

                    first = datastore[0];         
                    var txt  = '';
                    for (let attr in first) {
                        // alert(attr);
                        i++;
                       txt = txt + '<input class="form-check-input select" type="checkbox" value="" id=chk"'+ attr+ '">'+attr+'</input>'
                    }  
                    $("#SelectCols").html(txt);

                }); 

                // List Column name as input checkbox
                // Move to next page
                // How to move data to next page ?
                // Hide input text box and nex btton
                // Display list of attribute as checkbox
                // Show Next(new button )
             });
         }); 
         // button clicked when boxes are checked
         const myArray = [];
         $("#lastBtn").click(function(){
             console.log ($("#SelectCols input:checkbox:checked").each(function(){ myArray.push($(this).val()); }));
             datastore.forEach(element => {
                 let attr = myArray[0];
                    console.log($(attr));
            }); 
         });
    });

     </script>
</head>

<body>
    <!-- Complete structure of model/ project  -->
    <div class="main">
    <div class="container" id="Input_URL">
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label" style="padding-top: 20px;">Enter CSV File URL</label>
            <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="https://raw.githubcontent.com/xyz.csv">
        </div>
        <button type="button" id="Nextbtn" class="btn btn-primary" style="letter-spacing: 2px;">Next</button>
    </div>

    <div class="container" id="SelectCols">

    </div>    
    <!-- <div class="container2">
        <div  class="mb-3">
            <label for="exampleFormControlInput1"  class="form-label" style="padding-top: 20px;">Select Graph
                Elements</label>
            <select class="form-select" aria-label="Default select example">
                <option selected value="1">Age</option>
                <option value="2">Sex</option>
                <option value="3">CP_Type</option>
                <option value="4">Blood Pressure</option>
                <option value="5">Cholestrol</option>
                <option value="6">ECG</option>
                <option value="7">Max Heart Rate</option>
                <option value="8">Exercise Angia</option>
                <option value="9">Family History</option>
                <option value="10">Target</option>
            </select>
        </div> -->
        <button type="button" id="lastBtn" class="btn btn-primary" style="letter-spacing: 2px;">Next</button>
    </div>
    </div>
   
    <!-- <script src="script.js"></script> -->
</body>

</html>
